{% extends "layouts/base.html" %}

{% block title %}System Foundation | Open OSCAL Wizard{% endblock %}

{% block content %}
  <h1 class="usa-heading">System Foundation</h1>
  <p class="usa-intro">
    Capture the minimum system details needed to start a workspace export.
  </p>

  {% if errors %}
    <div class="usa-alert usa-alert--error" role="alert" aria-live="polite">
      <div class="usa-alert__body">
        <h2 class="usa-alert__heading">Please fix the errors below</h2>
        <ul class="usa-list">
          {% for error in errors %}
            <li>{{ error.field }}: {{ error.msg }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endif %}

  <form class="usa-form" method="post" action="/system-foundation/export" novalidate>
    <label class="usa-label" for="system-name">System name</label>
    <input
      class="usa-input"
      id="system-name"
      name="system_name"
      type="text"
      value="{{ form_data.get('system_name', '') }}"
      required
    >

    <label class="usa-label" for="impact-level">Impact level</label>
    <select class="usa-select" id="impact-level" name="impact_level" required>
      <option value="" {% if not form_data.get('impact_level') %}selected{% endif %}>
        Select an impact level
      </option>
      <option value="low" {% if form_data.get('impact_level') == 'low' %}selected{% endif %}>
        Low
      </option>
      <option value="moderate" {% if form_data.get('impact_level') == 'moderate' %}selected{% endif %}>
        Moderate
      </option>
      <option value="high" {% if form_data.get('impact_level') == 'high' %}selected{% endif %}>
        High
      </option>
    </select>

    <label class="usa-label" for="authorization-boundary">Authorization boundary</label>
    <textarea
      class="usa-textarea"
      id="authorization-boundary"
      name="authorization_boundary"
      required
    >{{ form_data.get('authorization_boundary', '') }}</textarea>

    <label class="usa-label" for="system-owner">System owner</label>
    <input
      class="usa-input"
      id="system-owner"
      name="system_owner"
      type="text"
      value="{{ form_data.get('system_owner', '') }}"
      required
    >

    <label class="usa-label" for="authorizing-official">Authorizing official</label>
    <input
      class="usa-input"
      id="authorizing-official"
      name="authorizing_official"
      type="text"
      value="{{ form_data.get('authorizing_official', '') }}"
      required
    >

    <button class="usa-button margin-top-3" type="submit">
      Export workspace JSON
    </button>
  </form>
{% endblock %}
